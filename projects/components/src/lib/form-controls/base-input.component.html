<div class="input-group w-100" [id]="id">
    <div *ngIf="labelLeft" class="input-group-prepend">
        <span class="input-group-text" [ngClass]="{'border-0 rounded-0 bg-transparent': !border}"> {{labelLeft}}</span>
    </div>

    <div class="form-control d-flex h-100"
    [ngClass]="{'form-label-group': floatingLabel, 'p-0 m-0': !floatingLabel, 'border-0 rounded-0  bg-transparent': !border, 'is-invalid': errors, 'is-valid': !errors && isDirty, 'flex-wrap': tags && tags.length > 0}">

        <div *ngIf="tags" class="d-flex flex-wrap tags"
            [ngClass]="{'form-label-no-placeholder': floatingLabel && tags.length > 0}">
            <div *ngFor="let item of tags; let i = index" class="border rounded m-1 tag overflow-none"
                [ngStyle]="{'background-color': item.color}">
                <div class="d-flex blend-text pl-1">
                    <div>
                        {{tagItemName && item ? item[tagItemName] : item}}
                    </div>
                    <button (click)="removeTag.emit(i)" class="close-button" type="button" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
            </div>
        </div>
        
        <input 
            [placeholder]="floatingLabel ? floatingLabel : (placeholder ? placeholder : '')"
            (keydown)="keyDown.emit($event);"
            (keydown.arrowdown)="arrowDown.emit($event);"
            (keydown.arrowup)="arrowUp.emit($event);"
            (focusout)="focusOut.emit($event)"
            [ngModel]="value" 
            (ngModelChange)="hasChanged($event)"
            class="border-0 bg-transparent flex-fill" 
            [ngClass]="{'form-control-custom-input': !floatingLabel, 'font-italic': fontItalic, 'disabled-input': disabled, 'form-label-no-placeholder': floatingLabel && tags && tags.length > 0}" 
            [disabled]="disabled"
            [id]="id"
            [type]="type"
            [attr.autocapitalize]="autocapitalize"
            [title]="errors ? errors : ''"
            [attr.maxlength]="maxlength"
        />

        <label *ngIf="floatingLabel" [ngClass]="{'form-label-no-placeholder': floatingLabel && tags && tags.length > 0}" [for]="id">{{floatingLabel}}</label>
    </div>

    <div class="input-group-append" *ngIf="iconClass">
        <span class="input-group-text" [ngClass]="{'border-0 rounded-0 bg-transparent': !border}">
            <i  class="icon-append {{iconClass}}"></i>
        </span>
    </div>

</div>