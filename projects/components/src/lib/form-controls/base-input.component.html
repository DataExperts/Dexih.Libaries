<div class="input-group w-100">
    <div *ngIf="labelLeft" class="input-group-prepend">
        <span [attr.for]="id" class="input-group-text" [ngClass]="{'border-0 rounded-0 bg-transparent': !border}"> {{labelLeft}}</span>
    </div>

    <div class="form-control h-100 p-0 m-0"
    [ngClass]="{'border-0 rounded-0  bg-transparent': !border, 'is-invalid': errors, 'is-valid': !errors && isDirty && autoValidate, 'flex-wrap': tags && tags.length > 0}">

        <div  class="d-flex flex-wrap"
            [ngClass]="{'form-label-group': floatingLabel, 'form-label-group-tags': floatingLabel && tags?.length > 0}">
            <div *ngFor="let item of tags; let i = index" class="border rounded m-1 tag overflow-none"
                [ngStyle]="{'background-color': item.color}">
                <div class="d-flex blend-text pl-1">
                    <div>
                        {{tagItemName && item ? item[tagItemName] : item}}
                    </div>
                    <button (click)="removeTag.emit(i)" class="close-button" type="button" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
            </div>
        
        <input 
            [placeholder]="enableFloatingAnimation && floatingLabel ? floatingLabel : (placeholder ? placeholder : '')"
            [readonly]="readonly"
            (keydown)="keyDown.emit($event);"
            (keydown.arrowdown)="arrowDown.emit($event);"
            (keydown.arrowup)="arrowUp.emit($event);"
            (focusout)="focusOut.emit($event)"
            [ngModel]="value" 
            (ngModelChange)="hasChanged($event)"
            class="border-0 bg-transparent form-control-custom-input" 
            [ngClass]="{'form-label-group-tags': floatingLabel && tags && tags.length > 0, 
                'form-label-no-placeholder': (floatingLabel && (!enableFloatingAnimation || (value?.length > 0 &&  (!tags || tags.length === 0)))), 
                'font-italic': fontItalic, 'disabled-input': disabled}" 
            [disabled]="disabled"
            [id]="id"
            [type]="type"
            [pattern]="pattern"
            [attr.autocapitalize]="autocapitalize"
            [title]="errors ? errors : ''"
            [attr.maxlength]="maxlength"
        />

        <label *ngIf="floatingLabel" [ngClass]="{'form-label-group-values': !enableFloatingAnimation || value || (tags && tags.length > 0)}" [for]="id">{{floatingLabel}}</label>
    </div>
</div>

    <div class="input-group-append" *ngIf="iconClass">
        <span class="input-group-text" [ngClass]="{'border-0 rounded-0 bg-transparent': !border}">
            <i  class="icon-append {{iconClass}}"></i>
        </span>
    </div>

</div>